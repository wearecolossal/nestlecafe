function mapScript(e,t,o,a){function l(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(i,f),T(),$(".mobile.notice").addClass("active")):m.innerHTML="Geolocation is not supported by this browser."}function i(e){y=new google.maps.Geocoder;var t=v(e.coords.latitude,e.coords.longitude,"lat"),o=v(e.coords.latitude,e.coords.longitude,"lng");if(v(e.coords.latitude,e.coords.longitude,null))var a=300;else var a=200;h(t,o,a),p(t,o,9)}function s(){y=new google.maps.Geocoder,p("31.968599","-99.901813",5)}function n(){var e=document.getElementById("address").value;"Canada"!=e&&"canada"!=e||(e="Fallowfield, Canada"),y.geocode({address:e},function(t,o){if(o==google.maps.GeocoderStatus.OK){console.log("Lat: "+t[0].geometry.location.lat()+", Long:"+t[0].geometry.location.lng());var a=v(t[0].geometry.location.lat(),t[0].geometry.location.lng(),"lat"),l=v(t[0].geometry.location.lat(),t[0].geometry.location.lng(),"lng");if(v(t[0].geometry.location.lat(),t[0].geometry.location.lng(),null)||"Fallowfield, Canada"==e)var i=300,s=7;else var i=100,s=9;m.setZoom(s),m.setCenter(t[0].geometry.location),h(a,l,i),T()}else alert("Geocode was not successful for the following reason: "+o)})}function r(){function e(e,t){return $(t).data("miles")<$(e).data("miles")?1:-1}$(".map-list li").sort(e).appendTo(".map-list")}var c="no";console.log(c),$("button.find-address").on("click",function(){"no"==c&&(n(),c="yes"),setTimeout(function(){c="no"},3e3)});var d,m=$("#map"),g=0,u=function(e,t){var o=new google.maps.LatLng(e,t),a={scrollwheel:!1,zoom:15,center:o,mapTypeControl:!1,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},styles:[{featureType:"water",stylers:[{saturation:43},{lightness:-11},{hue:"#0088ff"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:"#ff0000"},{saturation:-100},{lightness:99}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#808080"},{lightness:54}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ece2d9"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#ccdca1"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#767676"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"poi",stylers:[{visibility:"on"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#EBE5E0"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"on"}]}],mapTypeId:google.maps.MapTypeId.ROADMAP},l=new google.maps.Map(document.getElementById("map"),a),i=new google.maps.Marker({position:o,map:l,title:"You are here!"})},p=function(e,t,o){var a=new google.maps.LatLng(e,t),l={scrollwheel:!1,zoom:o,center:a,styles:[{featureType:"water",stylers:[{saturation:43},{lightness:-11},{hue:"#0088ff"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:"#ff0000"},{saturation:-100},{lightness:99}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#808080"},{lightness:54}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ece2d9"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#ccdca1"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#767676"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"poi",stylers:[{visibility:"on"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#EBE5E0"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"on"}]}]};$("#map").addClass("active"),m=new google.maps.Map(document.getElementById("map"),l);var i={lat:e,lng:t}},f=function(e){console.log("Error occurred. Error code: "+e.code),e.code<=3&&s()},y,m,v=function(e,t,o){if("56.130366"==e&&"-106.34677099999999"==t){return"lat"==o?"45.267381":"lng"!=o||"-75.829843"}return"lat"==o?e:"lng"==o&&t};setTimeout(function(){l()},1e3);var h=function(t,o,l){$(".map-list").html(""),$(".map-list").hide(),$counter=0,$.getJSON(e+t+"/"+o+"/"+l,function(e){$.each(e,function(e,t){$counter++;var o=t[0].online_order.length,l=" ";o<1&&(l="hide");var i=t[0].map.length,s=" ";i<1&&(s="hide");var n=t[0].facebook.length;console.log(n);var r=" ";n<1&&(r="hide");var c=$counter%2==0?'<div class="clearfix"></div>':"",d=t[0].coming_soon,m="";1===d&&(m='<span style="background:#FAC216;color:#8B680E;padding:5px;font-size:10px;font-weight:bold;">COMING SOON</span><br/>'),$(".map-list").append('<li class="result" data-miles="'+t[0].miles+'" class="cafe-list-item"><div class="list-container"><div class="image-container" style="background:url('+t[0].image+')"></div><div class="cafe-info"><span class="name">'+t[0].name+' <a target="_blank" href="'+t[0].facebook+'" class="'+r+'"><img src="'+a+'/ico-facebook.png" width="15" style="margin-top:-3px;"/></a></span><br><small>'+t[0].address+"</small>"+(t[0].hours.length>0?'<small style="font-size:12px;line-height:1.25;display:block;padding:10px 0 0 0;">'+t[0].hours+"</small>":"")+"<br/><small>"+Math.round(t[0].miles)+" miles</small><br>"+m+'<a target="_blank" class="'+l+' online-order" href="'+t[0].online_order+'">Order Online </a> <a style="padding-left:5px;" target="_blank" class="'+s+'" href="'+t[0].map+'">Get Directions</a></div><div class="clearfix"></div><div class="services"><img class="active-'+t[0].wifi+' loc-wifi" src="'+a+'/loc-wifi.png" width="30"/><img class="active-'+t[0].coffee+' loc-coffee" src="'+a+'/loc-coffee.png" width="30"/><img class="active-'+t[0].smoothies+' loc-smoothies" src="'+a+'/loc-smoothies.png" width="30"/><img class="active-'+t[0].cookie+' loc-cookie" src="'+a+'/loc-cookie.png" width="30"/><img class="active-'+t[0].frozenyogurt+' loc-frozenyogurt" src="'+a+'/loc-frozenyogurt.png" width="30"/><img class="active-'+t[0].bakery+' loc-bakery" src="'+a+'/loc-bakery.png" width="30"/><img class="active-'+t[0].curbside+' loc-curbside" src="'+a+'/loc-curbside.png" width="30"/><img class="active-'+t[0].icecream+' loc-icecream" src="'+a+'/loc-icecream.png" width="30"/><img class="active-'+t[0].savory+' loc-savory" src="'+a+'/loc-savory.png" width="30"/><div class="clearfix"></div></div><div class="clearfix"></div></div><div class="clearfix"></div></li>'+c)}),e.length<1&&$(".map-list").html('<li class="no-result">Sorry, there are no nearby caf&eacute;s!</li>')}),setTimeout(function(){r()},1e3),setTimeout(function(){$(".map-list").fadeIn(),$(".map-list").each(function(){var e=0;$(".result",this).each(function(){$(this).height()>e&&(e=$(this).height())}),$(".result",this).height(e)})},1500)},T=function(){setTimeout(function(){$.getJSON(t,function(e){$.each(e,function(e,t){function a(){null!==i.getAnimation()?i.setAnimation(null):i.setAnimation(google.maps.Animation.BOUNCE)}var l=new google.maps.LatLng(t.lat,t.lng),i=new google.maps.Marker({position:l,map:m,animation:google.maps.Animation.DROP,title:t.title,direction:t.directions,icon:o,thumbnail:t.thumbnail}),s="",n="";i.direction.length<1&&(s="display:none"),i.thumbnail.length<1&&(n="display:none");var r=null,c=null;c=new google.maps.InfoWindow,i.addListener("click",function(){c.setContent('<p><img src="'+t.thumbnail+'" width="128" style="'+n+'"/><br/><strong>'+this.title+'</strong><br/> <a class="map-button" style="'+s+'" target="_blank" href="'+this.direction+'">directions</a>'),c.open(m,this)})})})},3e3)};$(".filter-choices a").on("click",function(){var e=$(this);$(".map-list li.no-results").remove();var t=$(this).data("filter");e.hasClass("chosen")?($(".filter-choices a").removeClass("chosen"),$(".map-list li").fadeIn()):($(".filter-choices a").removeClass("chosen"),$(this).addClass("chosen"),$(".map-list li").fadeOut(),$("img.active-1."+t).parent().parent().parent().fadeIn(),$("img.active-1."+t).length<1&&$(".map-list").append('<li class="no-result">Sorry, there are no results for your filter!</li>'))})}var addUrlToDocuments=function(e){$('a[data-load="document"]').each(function(){var t=$(this).attr("href");$(this).attr("href",e+t)})},menuToggles=function(e){e>842&&($("ul.navlist a.dropdown").mouseenter(function(){var e=$(this).data("dropdown");$(e).addClass("active"),$(".navigation").addClass("extended")}),$("ul.navlist a.dropdown").mouseleave(function(){var e=$(this).data("dropdown");$(e).hasClass("active")||($(e).removeClass("active"),$(".navigation").removeClass("extended"))}),$("ul.navlist a").mouseleave(function(){$(this).hasClass("dropdown")||($("ul.menulist").removeClass("active"),$(".navigation").removeClass("extended"))}),$(".menulist.dropdown").mouseleave(function(){$(this).hasClass("active")&&($(this).removeClass("active"),$(".navigation").removeClass("extended"))}),$("a.logo").mouseenter(function(){$("ul.menulist").removeClass("active"),$(".navigation").removeClass("extended")}))};$(document).ready(function(){var e=$(window).width();menuToggles(e),$(window).resize(function(){e=$(this).width(),menuToggles(e)}),$("a.mobile-show").click(function(){$("ul.navlist").toggleClass("display"),$(".menulist").removeClass("active"),$(".navigation").toggleClass("mobile-extended")}),$("li.mobile-current a").click(function(){$(".columns.side").toggleClass("mobile-extended")})});